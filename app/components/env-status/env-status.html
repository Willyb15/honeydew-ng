<div ng-attr-id="{{ EnvStatus.app }}" class="env-status table-responsive">

  <table class="table table-hover">
    <thead>
      <tr>
        <th>app</th>
        <th>env</th>
        <th>healthcheck</th>
        <th>honeydew</th>
        <th ng-if="EnvStatus.isSharecare()">kabocha</th>
      </tr>
    </thead>
    <tbody>

      <tr ng-repeat="(name, app) in EnvStatus.statuses">
        <td class="name">
          <span>{{ ::name.split(',')[0] }}</span>
        </td>
        <td class="env">
          <span>{{ ::name.split(',')[1] }}</span>
        </td>
        <td class="healthcheck dropdown">

          <div class="dropdown">
            <a ng-href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span class="fa fa-2x"
                    ng-class="{
                    'fa-check-circle green': app.healthcheck.summary === true,
                    'fa-times-circle red': app.healthcheck.summary === false,
                    'fa-times-circle silver': !app.hasOwnProperty('healthcheck')
                    }"
                    ></span>
            </a>
            <div class="dropdown-menu healthcheck-popover" role="menu">
              healthchecks:
              <ul>
                <li ng-repeat="(name, box) in app.healthcheck">
                  <span ng-if="name !== 'summary'">
                    <a target="_blank" ng-href="{{ box.url }}">{{ name }}</a>
                    <span class="fa"
                          ng-class="{
                          'fa-check-circle green': box.status === true,
                          'fa-times-circle red': box.status === false,
                          'fa-times-circle silver': !app.healthcheck.hasOwnProperty(name)
                          }"
                          ></span>
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </td>
        <td class="honeydew">
          <div class="dropdown">

            <a ng-href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span class="fa fa-2x"
                    ng-class="{
                    'fa-check-circle green': app.honeydew.summary === true,
                    'fa-times-circle red': app.honeydew.summary === false,
                    'fa-times-circle silver': !app.honeydew.hasOwnProperty('summary')
                    }"
                    ></span>
            </a>

            <div class="dropdown-menu healthcheck-popover" role="menu">
              <div>
                <a target="_blank"
                   ng-href="{{ app.honeydew.url }}">dashboard.</a>
              </div>
              <div>
              <span class="honeydew-details">
                {{ app.honeydew.success }} successes; {{ app.honeydew.total }} total.
              </span>
              </div>
            </div>

          </div>
        </td>
        <td ng-if="EnvStatus.isSharecare()">
          <a target="_blank" ng-href="{{ app.kabocha.url }}">
            <span class="fa fa-2x"
                  ng-class="{
                  'fa-check-circle green': app.kabocha.summary === true,
                  'fa-times-circle red': app.kabocha.summary === false,
                  'fa-times-circle silver': !app.kabocha.hasOwnProperty('summary')
                  }"
                  ></span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>

</div>
